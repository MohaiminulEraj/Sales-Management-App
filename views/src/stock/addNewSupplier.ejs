<%- include('../partials/header.ejs') %>

<%- include('../partials/navbar.ejs') %>
 
<form id="supplierForm" style="margin-top: 26px;" class="container">
    <div class="row mb-3">
        <div class="col">
            <h4>Add New Supplier Details</h4>
            <hr>
        </div>
    </div>  
    <div class="row mb-3">
        <div class="col">
            <label for="sNameId">Name </label>
            <input type="text" id="sNameId" class="form-control" placeholder="Name" name="sName" required>
        </div>
        <div class="col">
            <label for="companyId">Company </label>
            <input type="text" id="companyId" class="form-control" placeholder="Company" name="company">
        </div>
    </div>
    <div class="row mb-3">
        <div class="col">
            <label for="phoneId">Phone </label>
            <input type="text" id="phoneId" class="form-control" placeholder="e.g: 0187xxxxxxx" name="phone" required>
        </div>
        <div class="col">
            <label for="emailId">Email </label>
            <input type="text" id="emailId" class="form-control" placeholder="Email" name="email" required>
        </div>
    </div>
    <div class="row mb-3">
        <div class="col">
            <label for="addressId">Address </label>
            <input type="text" id="addressId" class="form-control" placeholder="Address" name="address">
        </div>
        <div class="col">
            <label for="cityId">City </label>
            <input type="text" id="cityId" class="form-control" placeholder="City" name="city">
        </div>
    </div>
    <div class="row mb-3">
        <div class="col">
            <label for="regionId">Region </label>
            <input type="text" id="regionId" class="form-control" placeholder="Region" name="region">
        </div>
        <div class="col">
            <label for="countryId">Country </label>
            <input type="text" id="countryId" class="form-control" placeholder="Country" name="country">
        </div>
    </div>
    <div class="row mb-3">
        <div class="col">
            <label for="postBoxId">PostBox </label>
            <input type="text" id="postBoxId" class="form-control" placeholder="PostBox" name="postBox">
        </div>
        <div class="col">
            <label for="taxId">TAX ID </label>
            <input type="text" id="taxId" class="form-control" placeholder="TAX" name="tax">
        </div>
    </div>

    <button style="float: right;" id="supplierSubmitBtn" type="submit" class="btn btn-success mb-3">Add</button>

</form>

<script src="../../assets/js/jquery-3.5.1.min.js"></script>
<!-- <script src="addNewSupplier.js"></script> -->
<script src="suppliers.js"></script>

<script>
document.getElementById("supplierSubmitBtn").addEventListener("click", function (e) {
    if (validator.isMobilePhone(phone.value, ['bn-BD']) && validator.isEmail(email.value)) {
        const supplier = {
            sName: sName.value,
            company: company.value,
            phone: phone.value,
            email: email.value,
            address: address.value,
            city: city.value,
            region: region.value,
            country: country.value,
            postBox: postBox.value,
            tax: tax.value
        }

        if (supplier.length > 0) {
            alert("Thank You");
        }
    ipcRenderer.send("new-supplier", supplier);

    } else {
        e.preventDefault();
        if (!validator.isMobilePhone(phone.value, ['bn-BD'])) {
            return alert("Please put a valid Phone Number");
        } else if (!validator.isEmail(email.value)) {
            return alert("Please Put a valid Email Address");
        }
    }
    // supplierForm.reset();
});
</script>
<%- include('../partials/footer.ejs') %>
